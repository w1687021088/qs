## 什么是 `WebSocket`（原理）;

`WebSocket` 是一种基于 TCP 传输协议， 并复用HTTP的握手通道建立连接， 使客户端和服务器之间的数据交换变得更加简单，允许服务端主动向客户端推送数据。

1. 客户端发起http请求(携带WebSocket支持的版本号等信息，如：Upgrade（升级）、Connection、WebSocket-Version等)，建立起TCP连接；

2. 服务器收到客户端的握手请求后，同样采用HTTP协议回馈数据；

3. 客户端收到连接成功的消息后，开始借助于TCP进行全双工通信；

## 特点：

1. 建立在 TCP 协议之上，服务器端的实现比较容易。

2. 与 HTTP 协议有着良好的兼容性。默认端口也是80(ws)和443(wss)，并且握手阶段采用 HTTP 协议，因此握手时不容易屏蔽，能通过各种 HTTP 代理服务器。

3. 数据格式比较轻量，性能开销小，通信高效。

4. 可以发送文本，也可以发送二进制数据。

5. 没有同源限制，客户端可以与任意服务器通信。 

6. 协议标识符是ws（如果加密，则为wss），服务器网址就是 URL。



tcp： 传输控制协议：面向连接，面向字节流的双全工可靠通讯。



## 与 HTTP 的区别：
相同： 

都是基于TCP协议传输协议。

区别：

WebSocket是双向通信协议，模拟Socket协议，可以双向发送或接受信息；

WebSocket是需要浏览器和服务器握手进行建立连接的，而http是浏览器发起向服务器的连接；


## 三者的区别：

WebSocket、Socket 和 Http 都是网络通信中常用的协议，它们有着不同的特点和用途。WebSocket 是一种实现实时通信的协议，它可以在单个 TCP 连接上进行全双工通信。Socket 是一种用于进程间通信和网络通信的编程接口，它提供了一种底层的 API，使得开发人员可以根据自己的需要设计和实现各种网络协议。而 Http 是一种用于在 Web 浏览器和 Web 服务器之间传输数据的协议，它使用 TCP 作为传输协议，每个请求和响应之间是相互独立的。



WebSocket 和 Socket 相比，WebSocket 协议在实现实时通信方面更为方便和高效。WebSocket 可以在建立连接后保持持久连接，并通过服务器端推送实现即时通信，而 Socket 需要在应用层自行处理数据的发送和接收，相对来说比较复杂。



Http 和 WebSocket、Socket 相比，Http 协议更为常用和简单，但它不能实现实时通信。每次请求和响应之间需要重新建立连接，因此在实时通信场景下会产生较大的延迟。WebSocket 和 Socket 可以更好地应对实时通信场景的需求，但相对来说需要更多的开发和维护成本。



总体来说，WebSocket、Socket 和 Http 在网络通信中各有优劣。在实时通信场景下，WebSocket 和 Socket 是更好的选择，而在普通的 Web 应用中，Http 是更为常用的协议。在选择通信协议时，需要根据具体需求来选择适合的协议，以实现更好的通信效果和用户体验。

----


WebSocket 是基于 TCP/IP 连接进行的`双向通信协议`，并复用HTTP的握手通道建立连接，使客户端与服务器实现双向数据通信。

webSocket 的连接过程是：

1. 客户端通过复用 http请求方式并携带 webSocket 升级参数，Connection（连接）与版本号建立 TCP 连接；
2. 服务端收到客户端的请求，并也通过 http回馈；
3. 客户端收到连接成功后，建立 TCP 全双工通信。

## 特点：

1. 建立 TCP 协议上；
2. 没有同源限制；
3. 数据比较轻量；
4. 客户端与服务器双向通信；

## 与 http 的区别：

1、含义不同
websocket：WebSocket是一种在单个TCP连接上进行全双工通信的协议。
http：超文本传输协议；

连接方式不同

websocket：WebSocket是需要浏览器和服务器握手进行建立连接的。

http：http是浏览器发起向服务器的连接，服务器预先并不知道这个连接。

连接状态不同

websocket：websocket是有状态的双向连接。

http：http 是无状态的单向连接。

协议开头不同

websocket：websocket的协议是以 ws/wss 开头。

http：http 对应的是 http/https。

