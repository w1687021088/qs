# 重绘和重排（回流）

重绘和重排（回流）属于浏览器在文档内部的元素发生改变时所需要对应修改文档内部的变化而出现的修改方式。

其中重绘时不一定会让浏览器发生回流，而回流一定会导致重绘。

回流和重绘都会发生昂贵的性能问题。

## 重绘

重绘指的是，文档中某些元素的外观发生变化触发浏览器重新计算元素在绝对位置上的重新渲染过程。

## 回流

回流指的是元素位置尺寸发生变化，导致文档需要重新排列布局等。

## 导致重绘的 css 属性：


- color
- border-style
- border-radius
- text-decoration
- box-shadow
- outline
- background


## 发生重排

- 页面初始渲染，这是开销最大的一次重排;
- 添加/删除可见的DOM元素;
- 改变元素位置;
- 改变元素尺寸，比如边距、填充、边框、宽度和高度等;
- 改变元素内容，比如文字数量，图片大小等;
- 改变元素字体大小;
- 改变浏览器窗口尺寸，比如resize事件发生时;
- 激活CSS伪类（例如：:hover）;
- 设置 style 属性的值，因为通过设置style属性改变结点样式的话，每一次设置都会触发一次reflow;
- 查询某些属性或调用某些计算方法：offsetWidth、offsetHeight等，除此之外，当我们调用getComputedStyl方法，或者IE里的 currentStyle 时，也会触发重排，原理是一样的，都为求一个“即时性”和“准确性”;

## 优化建议

1. 样式集中改变（减少重排次数）;
2. 将 DOM 离线（减少重排次数）;
3. 脱离文档流（减少重排范围）；
4. 读写分离将写入的值缓存，读取缓存的值（比如调用 js 的 style.offsetWidth方法等）；


