# `React 实现原理`

`React` 应用的核心在于处理 UI，让用户可以与之交互。这涉及到了`虚拟DOM`，`React Fiber`和`React Diff`。

`虚拟 DOM`：虚拟 DOM 就像它的名字一样，是真实 DOM 的轻量级 JavaScript 对象复制品。React 使用虚拟 DOM，通过比较新旧虚拟 DOM 来决定在真实 DOM 中实施何种改变。这样做可以最小化对真实 DOM 的操作，从而提高性能，因为直接操作 DOM 是非常耗费性能的。

`React Fiber`：Fiber 实际上是一个协调机制，是`React 16` 中新的协调引擎。每个 React 组件都有自己的 Fiber 对象，该对象保存了组件的相关信息。React 应用的更新过程从根 Fiber 开始，递归遍历每个子 Fiber，进行以下两步操作： 分别是生成虚拟 DOM 树（`reconciliation`阶段），和 `render` 阶段做`虚拟 DOM` 和真实 `DOM` 的同步。`Fiber`架构中的一个重要特性是可以将渲染工作划分为多个阶段，实现任务的`暂停`、`继续`，这种机制使 `React` 有能力去根据`优先级`，去`切分`和`安排`不同的任务，实现了`时间切片`。

`React Diff`：`React` 的 `diff` 算法用于高效比对`虚拟 DOM` 树的变化。实际上，`diff 算法`是遍历新老`虚拟 DOM` 树，并在`遍历过程`中找出差异，之后把`差异`部分应用到真实 `DOM` 上。这正是`虚拟 DOM` 带来的好处。

总的来说，`React` 的实现原理就是通过`虚拟 DOM` 和 `diff 算法`，借助 `Fiber` 架构进行的任务划分，找出应用状态改变的部分，最小化地、有序地应用到真实 `DOM`，从而提供一个快速、流畅的用户体验。
